---
title: Counterfactual Training
subtitle: Update Meeting Dec 2024
author: 
  - name: "**Patrick Altmeyer**"
    url: https://www.patalt.org/
  - name: Arie van Deursen
  - name: Cynthia C. S. Liem
institute: Delft University of Technology
date: today
format: 
  tudelft-revealjs:
    theme: custom.scss
    self-contained: true
    smaller: false
    scrollable: true
    preview-links: auto
    slide-number: true
    transition: slide
    background-transition: fade
    fig-align: center
    html-math-method: mathjax
    include-in-header:
      - text: |
          <script>
          MathJax = {
            options: {
              menuOptions: {
                settings: {
                  assistiveMml: false
                }
              }
            }
          };
          </script>
revealjs-plugins:
  - pointer
crossref: 
  prp-title: RQ
  prp-prefix: RQ
classoption: "notheorems"
---

## Status

- *Code base*: In place and streamlined for reproducibility and configuration. 
- *Experiments*: Lots of work done and results largely supportive of idea.
    - Ran into problems on DelftBlue, which has set me back about 2 weeks. 
- *Paper*: Still bare-bones. 
- *ICML*: Potentially still possible to submit something, but this will be rushed and not "finished".

## Problems on Cluster

- Trying to distribute: 
    1. Models/experiments across processes and then ...
    2. ... for each model/experiment distribute the counterfactual search across processes.
- Out-of-memory issues, data races, ...
- Multi-processing for models & multi-threading for counterfactual search: low CPU efficiency on DelftBlue (jobs get cancelled).

## High-Level Idea

Combine ideas from Energy-Based Models and Adversarial Training:

$$
\ell_{\text{clf}}(f(x),y) + \lambda_{\text{adv}} \ell_{\text{clf}}(f(x^\prime),y) + \lambda_{\text{gen}} \ell_{\text{gen}}(x^\prime,x) + \text{reg}
$$


